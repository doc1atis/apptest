{"version":3,"sources":["API/checkAuth.js","API/api.js","components/FormCreateProd/FormCreateProd.js","components/ProductList/ProductList.js","API/setAuthToken.js","components/HomePage/HomePage.js","components/ProductDetail/ProductDetail.js","components/EditPage/EditPage.js","components/LoginForm/LoginForm.js","App.js","index.js"],"names":["localStorage","getItem","navigate","instance","axios","create","baseURL","FormCreateProd","state","title","price","description","handleSubmit","e","a","preventDefault","props","edit","API","post","fetchData","put","_id","res","console","log","data","handleChange","setState","target","name","value","prevProps","product","Object","keys","length","this","onSubmit","id","type","placeholder","onChange","step","style","cursor","Component","ProductList","handleClick","delete","products","map","prod","key","width","display","justifyContent","marginBottom","border","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","to","onClick","defaults","headers","common","HomePage","setAuthToken","get","response","dir","status","checkAuth","marginTop","removeItem","ProductDetail","EditPage","useState","useEffect","LoginForm","email","password","persist","s","setItem","userToken","flexDirection","height","alignSelf","App","className","path","React","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d84b20d3.chunk.js","sourcesContent":["import { navigate } from \"@reach/router\";\nexport default function () {\n  if (!localStorage.getItem(\"token\")) {\n    navigate(\"/users/login\");\n  }\n}\n","import axios from \"axios\";\nconst instance = axios.create({ baseURL: \"http://localhost:8000/api\" });\nexport default instance;\n","import React, { Component } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport API from \"../../API/api\";\nimport \"./FormCreateProd.css\";\nexport default class FormCreateProd extends Component {\n  state = {\n    title: \"\",\n    price: \"\",\n    description: \"Description\",\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.product) {\n      if (!Object.keys(prevProps.product).length) {\n        this.setState(this.props.product);\n      }\n    }\n  }\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (!this.props.edit) {\n        await API.post(\"/products/new\", this.state);\n        // instead of fetching for all products again, I can push the new product in state.\n        this.props.fetchData();\n      } else {\n        // send request to edit here then navigate to detailPage to see edit.\n        const res = await API.put(`/products/${this.state._id}`, this.state);\n        console.log(res.data);\n        navigate(`/${this.state._id}`);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit} id=\"product-form\">\n          <input\n            name=\"title\"\n            type=\"text\"\n            placeholder=\"Title\"\n            value={this.state.title}\n            onChange={this.handleChange}\n          />\n          <input\n            name=\"price\"\n            type=\"number\"\n            step=\"0.1\"\n            placeholder=\"Price\"\n            value={this.state.price}\n            onChange={this.handleChange}\n          />\n          <textarea\n            name=\"description\"\n            value={this.state.description}\n            onChange={this.handleChange}\n          ></textarea>\n          <input\n            style={{ cursor: \"pointer\" }}\n            type=\"submit\"\n            value={this.props.edit ? \"Edit\" : \"Create\"}\n            id=\"submit-button\"\n          />\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { Link } from \"@reach/router\";\nimport API from \"../../API/api\";\nexport default class ProductList extends Component {\n  handleClick = (id) => {\n    return async () => {\n      try {\n        await API.delete(`/products/${id}`);\n        this.props.fetchData();\n      } catch (error) {\n        console.log(error);\n      }\n    };\n  };\n  render() {\n    const display = () =>\n      this.props.products.map((prod) => {\n        return (\n          <li\n            key={prod._id}\n            style={{\n              width: \"400px\",\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              marginBottom: \"20px\",\n              border: \"1px solid black\",\n              paddingLeft: \"10px\",\n              paddingRight: \"10px\",\n              paddingTop: \"10px\",\n              paddingBottom: \"10px\",\n              marginLeft: \"auto\",\n              marginRight: \"auto\",\n            }}\n          >\n            <Link to={`/${prod._id}`}>{prod.title}</Link>\n            <span>\n              <Link to={`/${prod._id}/edit`}>Edit</Link>\n              <button\n                style={{ marginLeft: \"20px\" }}\n                onClick={this.handleClick(prod._id)}\n              >\n                Delete\n              </button>\n            </span>\n          </li>\n        );\n      });\n\n    return (\n      <div>\n        <h1>All Products:</h1>\n        <ul>{display()}</ul>\n      </div>\n    );\n  }\n}\n","export default function (API) {\n  API.defaults.headers.common[\"authorization-x-token\"] = localStorage.getItem(\n    \"token\"\n  );\n}\n","import React, { Component } from \"react\";\nimport checkAuth from \"../../API/checkAuth\";\nimport FormCreateProd from \"../FormCreateProd/FormCreateProd\";\nimport ProductList from \"../ProductList/ProductList\";\nimport API from \"../../API/api\";\nimport setAuthToken from \"../../API/setAuthToken\";\nexport default class HomePage extends Component {\n  state = { products: [] };\n\n  fetchData = async () => {\n    try {\n      setAuthToken(API);\n      const response = await API.get(\"/products\");\n      this.setState({ products: response.data.products });\n    } catch (error) {\n      console.dir(error);\n      if (error.response.status === 401) {\n        checkAuth();\n      }\n    }\n  };\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  render() {\n    return (\n      <div>\n        <button\n          style={{ marginTop: \"20px\" }}\n          onClick={() => {\n            localStorage.removeItem(\"token\");\n            checkAuth();\n          }}\n        >\n          Logout\n        </button>\n        <h1>product manager</h1>\n        <FormCreateProd fetchData={this.fetchData} edit={false} />\n        <ProductList\n          fetchData={this.fetchData}\n          products={this.state.products}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport checkAuth from \"../../API/checkAuth\";\nimport API from \"../../API/api\";\nimport setAuthToken from \"../../API/setAuthToken\";\nexport default class ProductDetail extends Component {\n  state = {};\n  async componentDidMount() {\n    try {\n      setAuthToken(API);\n      const response = await API.get(`products/${this.props.id}`);\n      this.setState({ ...response.data });\n    } catch (error) {\n      console.log(error);\n      if (error.response.status === 401) {\n        checkAuth();\n      }\n    }\n  }\n\n  render() {\n    const display = () => {\n      if (this.state.title) {\n        return (\n          <>\n            <h1>{this.state.title}</h1>\n            <h1>Price: {this.state.price}</h1>\n            <h1>Description: {this.state.description}</h1>\n          </>\n        );\n      }\n    };\n    return (\n      <div>\n        <h1>detail</h1>\n        {display()}\n      </div>\n    );\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport FormCreateProd from \"../FormCreateProd/FormCreateProd\";\nimport API from \"../../API/api\";\nexport default function EditPage(props) {\n  const [state, setState] = useState({});\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await API.get(`/products/${props.id}`);\n        console.log(response.data);\n        setState(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    fetchData(props.id);\n  }, [props.id]);\n  return (\n    <div style={{ marginTop: \"40px\" }}>\n      <FormCreateProd product={state} edit={true} />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport API from \"../../API/api\";\nexport default function LoginForm() {\n  const [state, setState] = useState({ email: \"\", password: \"\" });\n  function handleChange(e) {\n    e.persist();\n    setState((s) => {\n      return { ...s, [e.target.name]: e.target.value };\n    });\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    try {\n      const res = await API.post(\"/users/login\", state);\n      // save token in localstorage\n      localStorage.setItem(\"token\", res.data.userToken);\n      // navigate to home page\n      navigate(\"/\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  return (\n    <div style={{ marginTop: \"30px\" }}>\n      <form\n        onSubmit={handleSubmit}\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          width: \"500px\",\n          height: \"200px\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <input\n          name=\"email\"\n          value={state.email}\n          type=\"email\"\n          placeholder=\"Email\"\n          onChange={handleChange}\n        />\n        <input\n          name=\"password\"\n          value={state.password}\n          type=\"password\"\n          placeholder=\"Password\"\n          onChange={handleChange}\n        />\n        <input\n          type=\"submit\"\n          value=\"Login\"\n          style={{ alignSelf: \"center\", cursor: \"pointer\" }}\n        />\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport \"./App.css\";\nimport HomePage from \"./components/HomePage/HomePage\";\nimport ProductDetail from \"./components/ProductDetail/ProductDetail\";\nimport EditPage from \"./components/EditPage/EditPage\";\nimport LoginForm from \"./components/LoginForm/LoginForm\";\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Router>\n          <HomePage path=\"/\" />\n          <ProductDetail path=\"/:id\" />\n          <EditPage path=\"/:id/edit\" />\n          <LoginForm path=\"/users/login\" />\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}