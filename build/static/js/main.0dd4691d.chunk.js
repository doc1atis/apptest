(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{26:function(e,t,a){e.exports=a(58)},31:function(e,t,a){},38:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=(a(31),a(5)),l=a(6),s=a(8),u=a(7),p=a(4),d=(a(38),a(1)),m=a.n(d),h=a(3),f=function(){localStorage.getItem("token")||Object(p.c)("/users/login")},v=a(9),b=a(25),g=a.n(b).a.create({baseURL:"https://olgymiom.com/api"}),y=(a(57),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",price:"",description:"Description"},e.handleSubmit=function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,e.props.edit){t.next=8;break}return t.next=5,g.post("/products/new",e.state);case 5:e.props.fetchData(),t.next=13;break;case 8:return t.next=10,g.put("/products/".concat(e.state._id),e.state);case 10:n=t.sent,console.log(n.data),Object(p.c)("/".concat(e.state._id));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){e.product&&(Object.keys(e.product).length||this.setState(this.props.product))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,id:"product-form"},r.a.createElement("input",{name:"title",type:"text",placeholder:"Title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("input",{name:"price",type:"number",step:"0.1",placeholder:"Price",value:this.state.price,onChange:this.handleChange}),r.a.createElement("textarea",{name:"description",value:this.state.description,onChange:this.handleChange}),r.a.createElement("input",{style:{cursor:"pointer"},type:"submit",value:this.props.edit?"Edit":"Create",id:"submit-button"})))}}]),a}(n.Component)),E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){return Object(h.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.delete("/products/".concat(t));case 3:e.props.fetchData(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"All Products:"),r.a.createElement("ul",null,e.props.products.map((function(t){return r.a.createElement("li",{key:t._id,style:{width:"400px",display:"flex",justifyContent:"space-between",marginBottom:"20px",border:"1px solid black",paddingLeft:"10px",paddingRight:"10px",paddingTop:"10px",paddingBottom:"10px",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(p.a,{to:"/".concat(t._id)},t.title),r.a.createElement("span",null,r.a.createElement(p.a,{to:"/".concat(t._id,"/edit")},"Edit"),r.a.createElement("button",{style:{marginLeft:"20px"},onClick:e.handleClick(t._id)},"Delete")))}))))}}]),a}(n.Component),j=function(e){e.defaults.headers.common["authorization-x-token"]=localStorage.getItem("token")},x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[]},e.fetchData=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(g),t.next=4,g.get("/products");case 4:a=t.sent,e.setState({products:a.data.products}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.dir(t.t0),401===t.t0.response.status&&f();case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{style:{marginTop:"20px"},onClick:function(){localStorage.removeItem("token"),f()}},"Logout"),r.a.createElement("h1",null,"product manager"),r.a.createElement(y,{fetchData:this.fetchData,edit:!1}),r.a.createElement(E,{fetchData:this.fetchData,products:this.state.products}))}}]),a}(n.Component),O=a(11),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(g),e.next=4,g.get("products/".concat(this.props.id));case 4:t=e.sent,this.setState(Object(O.a)({},t.data)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&f();case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"detail"),function(){if(e.state.title)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.state.title),r.a.createElement("h1",null,"Price: ",e.state.price),r.a.createElement("h1",null,"Description: ",e.state.description))}())}}]),a}(n.Component),w=a(12);function C(e){var t=Object(n.useState)({}),a=Object(w.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){function t(){return(t=Object(h.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.get("/products/".concat(e.id));case 3:a=t.sent,console.log(a.data),o(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(e.id)}),[e.id]),r.a.createElement("div",{style:{marginTop:"40px"}},r.a.createElement(y,{product:c,edit:!0}))}function D(){var e=Object(n.useState)({email:"",password:""}),t=Object(w.a)(e,2),a=t[0],c=t[1];function o(e){e.persist(),c((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(v.a)({},e.target.name,e.target.value))}))}function i(){return(i=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.post("/users/login",a);case 4:n=e.sent,localStorage.setItem("token",n.data.userToken),Object(p.c)("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{style:{marginTop:"30px"}},r.a.createElement("form",{onSubmit:function(e){return i.apply(this,arguments)},style:{display:"flex",flexDirection:"column",width:"500px",height:"200px",marginLeft:"auto",marginRight:"auto",justifyContent:"space-between"}},r.a.createElement("input",{name:"email",value:a.email,type:"email",placeholder:"Email",onChange:o}),r.a.createElement("input",{name:"password",value:a.password,type:"password",placeholder:"Password",onChange:o}),r.a.createElement("input",{type:"submit",value:"Login",style:{alignSelf:"center",cursor:"pointer"}})))}var S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.b,null,r.a.createElement(x,{path:"/"}),r.a.createElement(k,{path:"/:id"}),r.a.createElement(C,{path:"/:id/edit"}),r.a.createElement(D,{path:"/users/login"})))}}]),a}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.0dd4691d.chunk.js.map